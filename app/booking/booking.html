<ava-hdr-app [pageName]="'Alocação'" [icon]="'glyphicon-calendar'"></ava-hdr-app>

<div class="page-content">
    <table class="table table-borded table-striped table-hover table-responsive">
        <thead>
            <tr>
                <th>Projeto</th>
                <th>Profissional</th>
                <th>Data de Início</th>
                <th>Data Fim</th>
                <th>% Alocação</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let booking of bookings" (click)="getBookingsDetails(booking)">
                <td>{{ booking.project.name }}</td>
                <td>{{ booking.professionalId }}</td>
                <td>{{ booking.startDate | date: 'dd/MM/yyyy' }}</td>
                <td>{{ booking.endDate | date: 'dd/MM/yyyy' }}</td>
                <td>{{ booking.percentual | percentual }}</td>
            </tr>
        </tbody>
    </table>

    <form name="bookingForm" *ngIf="booking">
        <div class="form-group col-md-6">
            <label for="project">Projeto</label>
            <select class="form-control" [(ngModel)]="booking.projectId" name="project" required>
                <option *ngFor='let project of projects' 
                [selected]="booking.projectId == project.projectId"
                [value]="project.projectId">{{ project.name }}</option>
        </select>
        </div>
        <div class="form-group col-md-6">
            <label for="professional">Profissional</label>
            <select class="form-control" [(ngModel)]="booking.professionalId" name="professional" required>
                <option *ngFor='let professional of professionals' 
                [selected]="booking.professionalId == professional.professionalId"
                [value]="professional.professionalId">{{ professional.name }}</option>
        </select>
        </div>
        <div class="form-group col-md-6">
            <label for="startDate">Data Início</label>
            <input #startDateInput id="startDate" value="{{ booking.startDate | date:'yyyy-MM-dd' }}" name="startDate" placeholder="Informe a data inicial de alocação no projeto"
                required class="form-control" type="date" (input)="startDateChanged(startDateInput.value)">
        </div>
        <div class="form-group col-md-6">
            <label for="endDate">Data Fim</label>
            <input #endDateInput id="endDate" value="{{ booking.endDate | date:'yyyy-MM-dd' }}" name="endDate" placeholder="Informe a data fim de alocação no projeto"
                required class="form-control" type="date" (input)="endDateChanged(endDateInput.value)">
        </div>
        <div class="form-group col-md-6">
            <label for="bookingPercentual">Percentual Alocação</label>
            <div class="input-group">
                <input id="bookingPercentual" [(ngModel)]="booking.percentual" name="bookingPercentual" class="form-control" type="number"
                    min="0" max="100" step="10" value="{{ booking.percentual }}">
                <div class="input-group-addon">%</div>
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-10">
                <button type="button" class="btn btn-primary btn-outline">Salvar</button>
                <button type="button" class="btn btn-default" (click)="onBack()">Voltar</button>
            </div>
        </div>
    </form>
</div>